"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30074],{30074:function(e,t,l){l.r(t),l.d(t,{default:function(){return eu}});var n=l(20487),o=l(60577),i=l.n(o),r=l(2265),a=l(74514),c=l(36030),s=l(38432),d=l(47140),u=l(13323),h=l(39006),f=l(23378),p=l(57437);let g=e=>{let{show:t,showLogo:l,viewRef:o}=e,i=(0,f.t)(),{colorSchemeDark:r}=(0,h.uw)(),a=async()=>{let e=o.current;if(!e)return;await e.runAsync();let t=await e.toSVG(),n=getComputedStyle(document.documentElement),i=new Blob([t.replace(/var\((--[\w-]+)\)/g,(e,t)=>n.getPropertyValue(t).trim()||"#000")],{type:"image/svg+xml"}),a=URL.createObjectURL(i),c=new Image;c.onload=()=>{let e="hsl(".concat(n.getPropertyValue("--twc-secondary-100"),")"),t=document.createElement("canvas");t.width=c.width+48,t.height=c.height+48;let o=t.getContext("2d");if(!o)return;o.fillStyle=e,o.fillRect(0,0,t.width,t.height),o.drawImage(c,24,24);let i=()=>{t.toBlob(e=>{e&&(0,d.saveAs)(e,"chart.png"),URL.revokeObjectURL(a)},"image/png")};if(l){let e=new Image;e.onload=()=>{let l=t.width-32-24+4;o.drawImage(e,l,20,32,32),i()},e.onerror=e=>{console.error("Failed to load favicon:",e),i()},e.src=r?"/favicon-inverse.svg":"/favicon.svg"}else i()},c.onerror=e=>{console.error("Failed to load SVG chart image:",e),URL.revokeObjectURL(a)},c.src=a};return(0,p.jsx)("div",{className:(0,n.Z)("bg-secondary-100 absolute right-0 top-1 rounded-full transition-opacity group-focus-within:opacity-100 group-hover:opacity-100",t?"opacity-100":"opacity-0"),children:(0,p.jsx)(u.default,{icon:"Download",ariaLabel:i.formatMessage({id:"nQJp0q",defaultMessage:[{type:0,value:"Download"}]}),variant:"icon-transparent-button",onClick:a,size:20})})};var v=l(83809);let y=["blue","yellow","orange","green","pink","gray"],m=y.reduce((e,t)=>(e[t]={name:t,keyline:"hsl(var(--twc-".concat(t,"-100))"),fill:["hsl(var(--twc-".concat(t,"-100))"),"hsl(var(--twc-".concat(t,"-80))"),"hsl(var(--twc-".concat(t,"-60))"),"hsl(var(--twc-".concat(t,"-40))"),"hsl(var(--twc-".concat(t,"-20))")]},e),{}),k="blue",x=["theme2","theme3","theme4","theme5"],b="--custom-chart-theme-keyline",w="--custom-chart-theme-fill-",S=e=>{var t,l,n;if(!(null==e?void 0:null===(t=e.light)||void 0===t?void 0:t.fill))return null;let o=Math.max(e.light.fill.length,null!==(n=null===(l=e.dark)||void 0===l?void 0:l.fill.length)&&void 0!==n?n:0);return{name:"custom",keyline:"var(".concat(b,")"),fill:Array.from({length:o},(e,t)=>"var(".concat(w).concat(t,")"))}},j=["dots","stripes","crosshatch","grid","zigzag"],W=["filled","open"],L=/^theme\d*(_(dots|stripes|crosshatch|grid|zigzag)\d*)?(_(open|filled))?(_(green|yellow|blue|orange|pink|gray)\d*)?$/;class C{resolveStyleToken(e,t,l){if(!L.test(e))return e;let n=function(e,t,l,n){if(!L.test(e))return e;let{fillColor:o,strokeColor:i,fillType:r,patternId:a}=O(z(e),t,n);return"stroke"===l?i:"fill"===l&&a?"url(#".concat(a,")"):"filled"===r?o:"hsl(var(--twc-background))"}(e,t,l,this.chartId);return n!==e&&this.styleTokensApplied.add(e),n}constructor(e){this.chartId=e,(0,v.default)(this,"styleTokensApplied",new Set)}}function z(e){let t,l,n,o,i;for(let r of e.split("_")){for(let e of(r.startsWith("theme")&&(l=parseInt(r.slice(5))||l),j))if(r.startsWith(e)){n=e,o=parseInt(r.slice(e.length))||o;break}for(let e of W)if(r===e){i=e;break}for(let e of y)if(r.startsWith(e)){t=e,l=parseInt(r.slice(e.length))||l;break}}return{themeColor:l,patternType:n,patternVariant:o,fillType:i,themeOverride:t}}function O(e,t,l){let{themeColor:n,patternType:o,patternVariant:i,fillType:r,themeOverride:a}=e,c=a?m[a]:t,s=n?n-1:Math.floor(c.fill.length/2),d=c.fill[s],u=null!=r?r:"filled",h=o?void 0!==i?i-1:Math.floor(2.5):void 0,f="custom"===c.name?l:c.name,p=o&&void 0!==h?["pattern",f,s,o,h,u].join("-"):void 0;return{themeName:c.name,fillColor:d,strokeColor:c.keyline,fillType:u,fillIndex:s,patternType:o,patternIndex:h,patternId:p}}let P=[{size:6,coverage:.25,layout:"quincunx"},{size:3.5,coverage:.4,layout:"grid"},{size:5,coverage:.45,layout:"honeycomb"},{size:4,coverage:.8,layout:"honeycomb"},{size:6,coverage:1.1,layout:"grid"}],T=e=>{let{patternProps:t,dotSize:l,dotCoverage:n,layout:o}=e,{id:i,fgColor:r,fgOpacity:a,bgColor:c}=t,s=l/2,d=n*s;if("grid"===o||"quincunx"===o){let e="grid"===o,t=e?s:s*Math.sqrt(2),l=2*t;return(0,p.jsxs)("pattern",{id:i,patternUnits:"userSpaceOnUse",width:l,height:l,children:[c&&(0,p.jsx)("rect",{width:l,height:l,fill:c}),(0,p.jsxs)("g",{opacity:a,children:[(0,p.jsx)("circle",{cx:0,cy:0,r:d,fill:r}),(0,p.jsx)("circle",{cx:l,cy:0,r:d,fill:r}),!e&&(0,p.jsx)("circle",{cx:t,cy:t,r:d,fill:r}),(0,p.jsx)("circle",{cx:0,cy:l,r:d,fill:r}),(0,p.jsx)("circle",{cx:l,cy:l,r:d,fill:r})]})]})}if("honeycomb"===o){let e=s*Math.sqrt(3)/2;return(0,p.jsxs)("pattern",{id:i,patternUnits:"userSpaceOnUse",width:4*s,height:4*e,children:[c&&(0,p.jsx)("rect",{width:4*s,height:4*e,fill:c}),(0,p.jsxs)("g",{opacity:a,children:[(0,p.jsx)("circle",{cx:0,cy:0,r:d,fill:r}),(0,p.jsx)("circle",{cx:2*s,cy:0,r:d,fill:r}),(0,p.jsx)("circle",{cx:4*s,cy:0,r:d,fill:r}),(0,p.jsx)("circle",{cx:s,cy:2*e,r:d,fill:r}),(0,p.jsx)("circle",{cx:3*s,cy:2*e,r:d,fill:r}),(0,p.jsx)("circle",{cx:0,cy:4*e,r:d,fill:r}),(0,p.jsx)("circle",{cx:2*s,cy:4*e,r:d,fill:r}),(0,p.jsx)("circle",{cx:4*s,cy:4*e,r:d,fill:r})]})]})}};var A=e=>{let{patternIndex:t}=e,{size:l,coverage:n,layout:o}=P[t];return(0,p.jsx)(T,{patternProps:e,dotSize:l,dotCoverage:n,layout:o})};let I=[{density:6,strokeWidth:.25},{density:6,strokeWidth:.5},{density:6,strokeWidth:.75},{density:6,strokeWidth:1},{density:3,strokeWidth:.75}],M=e=>{let{patternIndex:t}=e,{density:l,strokeWidth:n}=I[t];return(0,p.jsx)(E,{patternProps:e,density:l,strokeWidth:n,crosshatch:!1})},E=e=>{let{patternProps:t,density:l,strokeWidth:n}=e,{id:o,fgColor:i,fgOpacity:r,bgColor:a}=t,c=l/2,s=3*l/2,d=["M-".concat(c,",").concat(c," L").concat(s,",").concat(c),"M".concat(c,",-").concat(c," L").concat(c,",").concat(s)].join(" ");return(0,p.jsxs)("pattern",{id:o,patternUnits:"userSpaceOnUse",width:l,height:l,children:[a&&(0,p.jsx)("rect",{width:l,height:l,fill:a}),(0,p.jsx)("path",{d:d,strokeWidth:n,stroke:i,opacity:r})]})},F=[{density:6,strokeWidth:.25},{density:6,strokeWidth:.5},{density:6,strokeWidth:.75},{density:6,strokeWidth:1},{density:3,strokeWidth:.75}],R=[{density:6,strokeWidth:.25},{density:6,strokeWidth:.5},{density:6,strokeWidth:.75},{density:6,strokeWidth:1},{density:3,strokeWidth:.75}],U=e=>{let{patternIndex:t}=e,{density:l,strokeWidth:n}=F[t];return(0,p.jsx)(_,{patternProps:e,density:l,strokeWidth:n,crosshatch:!1})},B=e=>{let{patternIndex:t}=e,{density:l,strokeWidth:n}=R[t];return(0,p.jsx)(_,{patternProps:e,density:l,strokeWidth:n,crosshatch:!0})},_=e=>{let{patternProps:t,density:l,strokeWidth:n,crosshatch:o}=e,{id:i,fgColor:r,fgOpacity:a,bgColor:c}=t,s=l*Math.sqrt(2),d=s/2,u=3*s/2,h=["M-".concat(d,",").concat(s," L").concat(s,",-").concat(d),"M0,".concat(u," L").concat(u,",0")],f=["M-".concat(d,",0 L").concat(s,",").concat(u),"M0,-".concat(d," L").concat(u,",").concat(s)],g=[...h,...o?f:[]].join(" ");return(0,p.jsxs)("pattern",{id:i,patternUnits:"userSpaceOnUse",width:s,height:s,children:[c&&(0,p.jsx)("rect",{width:s,height:s,fill:c}),(0,p.jsx)("path",{d:g,strokeWidth:n,stroke:r,opacity:a})]})},N=Math.PI/4,H=[{density:6,strokeWidth:.25,angle:N},{density:6,strokeWidth:.5,angle:N},{density:6,strokeWidth:.75,angle:N},{density:6,strokeWidth:1,angle:N},{density:3,strokeWidth:.75,angle:N}],Z=e=>{let{patternIndex:t}=e,{density:l,strokeWidth:n,angle:o}=H[t];return(0,p.jsx)(D,{patternProps:e,density:l,strokeWidth:n,angle:o})},D=e=>{let{patternProps:t,density:l,strokeWidth:n,angle:o}=e,{id:i,fgColor:r,fgOpacity:a,bgColor:c}=t,s=l/Math.abs(Math.tan(o)),d=2*s,u=n/2,h="M-".concat(u,",0 L").concat(s,",").concat(l-u," L").concat(d+u,",0");return(0,p.jsxs)("pattern",{id:i,patternUnits:"userSpaceOnUse",width:d,height:l,children:[c&&(0,p.jsx)("rect",{width:d,height:l,fill:c}),(0,p.jsx)("path",{d:h,strokeWidth:n,stroke:r,opacity:a,fill:"none"})]})};var q=e=>{let{themedStyleToken:t}=e,{patternId:l,patternType:n,patternIndex:o,fillType:i,fillColor:r}=t;if(!l||void 0===o)return null;let a="filled"===i?r:void 0,c="filled"===i?"black":r,s="filled"===i?.3:1;return"stripes"===n?(0,p.jsx)(U,{id:l,patternIndex:o,fgColor:c,fgOpacity:s,bgColor:a}):"dots"===n?(0,p.jsx)(A,{id:l,patternIndex:o,fgColor:c,fgOpacity:s,bgColor:a}):"crosshatch"===n?(0,p.jsx)(B,{id:l,patternIndex:o,fgColor:c,fgOpacity:s,bgColor:a}):"grid"===n?(0,p.jsx)(M,{id:l,patternIndex:o,fgColor:c,fgOpacity:s,bgColor:a}):"zigzag"===n?(0,p.jsx)(Z,{id:l,patternIndex:o,fgColor:c,fgOpacity:s,bgColor:a}):null},V=e=>{let{theme:t,styleTokens:l,chartId:n}=e,o=(0,r.useMemo)(()=>l.map(e=>O(z(e),t,n)).filter(e=>e.patternType),[t,l,n]);return o.length>0&&(0,p.jsx)("svg",{width:0,height:0,style:{position:"absolute"},children:o.map(e=>(0,p.jsx)(q,{themedStyleToken:e},e.patternId))})},$=e=>{var t,l,n,o,i;let{customTheme:r,wrapperId:a}=e,c=null==r?void 0:null===(t=r.light)||void 0===t?void 0:t.keyline,s=null==r?void 0:null===(l=r.dark)||void 0===l?void 0:l.keyline,d=null==r?void 0:null===(n=r.light)||void 0===n?void 0:n.fill,u=null!==(i=null==r?void 0:null===(o=r.dark)||void 0===o?void 0:o.fill)&&void 0!==i?i:[];return c&&d?(0,p.jsx)("style",{children:"\n#".concat(a," {\n  ").concat(b,": ").concat(c,";\n  ").concat(d.map((e,t)=>"".concat(w).concat(t,": ").concat(e,";")).join("\n  "),"\n  @media (prefers-color-scheme: dark) {\n    ").concat(s?"".concat(b,": ").concat(s,";"):"","\n    ").concat(u.map((e,t)=>"".concat(w).concat(t,": ").concat(e,";")).join("\n    "),"\n  }\n}")}):null},Y=l(43740);class X{addListener(e,t){this.scrollCallbacks.add(t),e instanceof HTMLElement&&!this.scrollableParents.has(e)?(this.scrollableParents.add(e),e.addEventListener("scroll",this.handleScroll)):e!==window||this.windowListenerActive||(this.windowListenerActive=!0,window.addEventListener("scroll",this.handleScroll))}removeListener(e,t){this.scrollCallbacks.delete(t),e instanceof HTMLElement?(this.scrollableParents.delete(e),e.removeEventListener("scroll",this.handleScroll)):e===window&&this.windowListenerActive&&(this.windowListenerActive=!1,window.removeEventListener("scroll",this.handleScroll))}constructor(){(0,v.default)(this,"scrollCallbacks",new Set),(0,v.default)(this,"scrollableParents",new Set),(0,v.default)(this,"windowListenerActive",!1),(0,v.default)(this,"handleScroll",()=>{this.scrollCallbacks.forEach(e=>e())})}}let G=new X;var J=l(72493);function Q(e){return Array.isArray(e)&&e.every(e=>"string"==typeof e)}function K(e,t){return"\n    split(\n      replace(\n        replace(\n          replace(\n            ".concat(e,",\n            regexp('(.{1,").concat(t,"})(?:[\\\\s\xa7]|$)', 'g'),\n            '$1\xa7'\n          ),\n          regexp('([^\xa7\\\\n]{").concat(t,"})(?!\xa7)', 'g'),\n          '$1\xa7'\n        ),\n        regexp('\xa7+$','g'),\n        ''\n      ),\n      '\xa7'\n    )\n  ").trim()}function ee(e,t,l,n){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];for(let i of["fill","stroke"]){let r=e[i];if(r)for(let e of Array.isArray(r)?r:[r])if(null===e||Array.isArray(e)||"string"!=typeof e.value){if(null!==e&&!Array.isArray(e)&&"string"==typeof e.scale&&"string"==typeof e.field&&["color","fill","stroke"].includes(e.scale)){let t="fill"===i?"categoryFillScale":l?"categoryColorScale":"categoryStrokeScale";e.scale=t}else if(o){let t="fill"===i?"explicitFillScale":l?"explicitColorScale":"explicitStrokeScale";if(null===e||Array.isArray(e)||"string"!=typeof e.field){if(null!==e&&!Array.isArray(e)&&"string"==typeof e.signal){let l=/^datum\.(.+)$/.exec(e.signal);l&&(e.scale=t,e.field=l[1],e.signal=void 0)}}else e.scale=t}}else{let o="fill"===i?"fill":l?"color":"stroke";e.value=n.resolveStyleToken(e.value,t,o)}}}function et(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),l.push.apply(l,n)}return l}function el(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?et(Object(l),!0).forEach(function(t){(0,v.default)(e,t,l[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):et(Object(l)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))})}return e}let en="hsl(var(--twc-background))",eo="hsl(var(--twc-primarySolid-100))",ei="OpenAI Sans, sans-serif",er="SF Mono, monospace",ea="normal",ec=e=>{let{show:t}=e;return(0,p.jsx)("div",{className:(0,n.Z)("absolute right-0 top-1 bg-[radial-gradient(circle_farthest-side_at_top_right,_hsl(var(--twc-background)/1)_75%,_hsl(var(--twc-background)/0)_100%)] pb-4 pl-4 transition-opacity group-focus-within:opacity-0 group-hover:opacity-0",t?"opacity-100":"opacity-0"),children:(0,p.jsx)(s.Z,{icon:"LogoIcon",width:"20"})})},es={x:0,y:0,value:null},ed=e=>{let{id:t,data:l}=e,{0:n,1:o}=(0,r.useState)(es),{0:s,1:d}=(0,r.useState)(!1),{oaiSpec:u}=l,{vegaSpec:h,styleTokens:f,theme:v}=r.useMemo(()=>(function(e){var t,l,n,o,i,r,a,c,s;let{chartId:d,data:u}=e,h=null!==(n=null===(t=u.oaiSpec)||void 0===t?void 0:t.theme)&&void 0!==n?n:k,f="object"==typeof h,p=f?null!==(o=S(h))&&void 0!==o?o:m[k]:null!==(i=m[h])&&void 0!==i?i:m[k],g=f?p.fill:x,v=null;try{let{spec:e}=(0,J.compile)(function(e){var t,l;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,{oaiSpec:o,vegaSpec:i}=e;return el(el({},i),{},{config:el(el({},{background:"transparent",numberFormat:".2~f",range:{category:n},mark:{color:"theme"},axis:{labelColor:eo,titleColor:eo,domainColor:eo,tickColor:eo,gridColor:"hsl(var(--twc-primarySolid-12))",labelFontSize:12,labelLineHeight:14.399999999999999,titleFontSize:14,titleLineHeight:16.8,labelFontWeight:ea,titleFontWeight:ea,ticks:!0,grid:!1,labelFlush:!1,labelAngle:0,labelPadding:10,titlePadding:20,titleFont:ei,labelLimit:1e3},axisX:{labelFont:(l=null!=o?o:{}).monoX?er:ei},axisY:{labelFont:l.monoY?er:ei},legend:{labelColor:eo,titleColor:eo,title:null,symbolType:"circle",orient:"top",labelFontSize:14,titleFontSize:14,titleLineHeight:16.8,labelFontWeight:ea,titleFontWeight:ea,labelFont:ei,titleFont:ei},title:{color:eo,subtitleColor:eo,fontSize:14,lineHeight:16.8,font:ei,anchor:"start",offset:30,fontWeight:"bold"},view:{stroke:"transparent"},text:{font:ei,fill:eo,fontSize:12,lineHeight:14.399999999999999},point:{filled:!1,fill:en,size:50,strokeWidth:1.5,opacity:1},line:{strokeWidth:1.5,point:{filled:!1,fill:en,size:50,strokeWidth:1.5}},arc:{stroke:"theme",strokeWidth:1},bar:{stroke:"theme",strokeWidth:1,cornerRadiusTopLeft:2,cornerRadiusTopRight:2},boxplot:{box:{cornerRadius:2,tooltip:null},ticks:{stroke:eo,size:1,thickness:.5,strokeWidth:.5,opacity:1},rule:{stroke:eo,strokeWidth:1,opacity:1},median:{stroke:"theme",size:1,thickness:.5,strokeWidth:.5,opacity:1}},errorbar:{rule:{stroke:eo,strokeWidth:1,opacity:1},ticks:{stroke:eo,size:1,thickness:.5,strokeWidth:.5,opacity:1}},scale:{bandPaddingInner:.1,offsetBandPaddingInner:.1,bandPaddingOuter:.2,bandWithNestedOffsetPaddingOuter:.2,bandWithNestedOffsetPaddingInner:.2,offsetBandPaddingOuter:0,barBandPaddingInner:0}}),null!==(t=i.config)&&void 0!==t?t:{}),width:(null==o?void 0:o.fitWidth)||(null==o?void 0:o.aspectRatio)?"container":i.width,height:(null==o?void 0:o.aspectRatio)?"container":i.height})}(u,g));v=e}catch(e){console.error("Error compiling Vega spec:",e)}let{styleTokensApplied:y}=function(e,t,l,n){var o,i;if(!(null==e?void 0:e.marks))return{styleTokensApplied:[]};let r=new C(l),{explicitScalesAvailable:a}=function(e,t,l,n){var o,i,r,a,c,s,d,u,h;null!==(r=e.scales)&&void 0!==r||(e.scales=[]);let f=Q(null===(i=e.config)||void 0===i?void 0:null===(o=i.range)||void 0===o?void 0:o.category)?e.config.range.category:null,p=e=>"category"===e.range?f:Q(e.range)?e.range:null,g=e.scales.findIndex(e=>"color"===e.name&&"ordinal"===e.type);if(g>=0){let n=e.scales[g],o=p(n);e.scales.splice(g,1),e.scales.push({name:"categoryColorScale",type:"ordinal",domain:n.domain,range:null!==(a=null==o?void 0:o.map(e=>l.resolveStyleToken(e,t,"color")))&&void 0!==a?a:n.range},{name:"categoryFillScale",type:"ordinal",domain:n.domain,range:null!==(c=null==o?void 0:o.map(e=>l.resolveStyleToken(e,t,"fill")))&&void 0!==c?c:n.range},{name:"categoryStrokeScale",type:"ordinal",domain:n.domain,range:null!==(s=null==o?void 0:o.map(e=>l.resolveStyleToken(e,t,"stroke")))&&void 0!==s?s:n.range})}else{let n=e.scales.findIndex(e=>"fill"===e.name&&"ordinal"===e.type);if(n>=0){let o=e.scales[n],i=p(o);e.scales.splice(n,1),e.scales.push({name:"categoryColorScale",type:"ordinal",domain:o.domain,range:null!==(d=null==i?void 0:i.map(e=>l.resolveStyleToken(e,t,"color")))&&void 0!==d?d:o.range},{name:"categoryFillScale",type:"ordinal",domain:o.domain,range:null!==(u=null==i?void 0:i.map(e=>l.resolveStyleToken(e,t,"fill")))&&void 0!==u?u:o.range})}let o=e.scales.findIndex(e=>"stroke"===e.name&&"ordinal"===e.type);if(o>=0){let n=e.scales[o],i=p(n);e.scales.splice(o,1),e.scales.push({name:"categoryStrokeScale",type:"ordinal",domain:n.domain,range:null!==(h=null==i?void 0:i.map(e=>l.resolveStyleToken(e,t,"stroke")))&&void 0!==h?h:n.range})}}let v=[...null!=n?n:[],...function(e,t){var l;let n=new Set;return null===(l=e.data)||void 0===l||l.forEach(e=>{Array.isArray(e.values)&&e.values.forEach(e=>{e[t]&&n.add(e[t])})}),Array.from(n)}(e,"color")];return v.length>0&&e.scales.push({name:"explicitColorScale",type:"ordinal",domain:v,range:v.map(e=>l.resolveStyleToken(e,t,"color"))},{name:"explicitFillScale",type:"ordinal",domain:v,range:v.map(e=>l.resolveStyleToken(e,t,"fill"))},{name:"explicitStrokeScale",type:"ordinal",domain:v,range:v.map(e=>l.resolveStyleToken(e,t,"stroke"))}),{explicitScalesAvailable:v.length>0}}(e,t,r,n);for(let l of(!function e(t,l){for(let n of t)l(n),"marks"in n&&Array.isArray(n.marks)&&e(n.marks,l)}(e.marks,e=>{var l;let n=["line","point","symbol"].includes(e.type),o=null===(l=e.encode)||void 0===l?void 0:l.update;o&&ee(o,t,n,r,a)}),null!==(o=e.legends)&&void 0!==o?o:[])){("color"===l.fill||"fill"===l.fill)&&(l.fill="categoryFillScale"),"color"===l.stroke?l.stroke="categoryColorScale":"stroke"===l.stroke&&(l.stroke="categoryStrokeScale");let e=null===(i=l.encode)||void 0===i?void 0:i.symbols;if(e)for(let l of Object.values(e))l&&ee(l,t,!1,r,a)}return{styleTokensApplied:Array.from(r.styleTokensApplied)}}(v,p,d,null===(l=u.oaiSpec)||void 0===l?void 0:l.dataColorTokens);!function(e,t){var l,n,o,i;if(!e)return;let r=(null===(l=e.scales)||void 0===l?void 0:l.filter(e=>"band"===e.type))||[];if(0===r.length)return;let a=null===(n=r.at(-1))||void 0===n?void 0:n.name,c=!!(null==a?void 0:a.toLowerCase().startsWith("y")),s=!!(null==a?void 0:a.toLowerCase().startsWith("x"));if(!e.marks||!c&&!s)return;null!==(o=e.signals)&&void 0!==o||(e.signals=[]),e.signals.push({name:"boxPlotBarSize",update:"bandwidth('".concat(a,"') * ").concat(t.boxPlotBarSize)},{name:"boxPlotTickSize",update:"bandwidth('".concat(a,"') * ").concat(t.boxPlotTickSize)},{name:"errorBarTickSize",update:"min(bandwidth('".concat(a,"') * ").concat(t.errorBarTickSize,", ").concat(t.errorBarMaxTickSize,")")});let d=c?"height":"width";for(let{style:t,encode:l}of e.marks)(null==l?void 0:null===(i=l.update)||void 0===i?void 0:i[d])&&((null==t?void 0:t.includes("boxplot-box"))||(null==t?void 0:t.includes("boxplot-median"))?l.update[d]={signal:"boxPlotBarSize"}:(null==t?void 0:t.includes("boxplot-ticks"))?l.update[d]={signal:"boxPlotTickSize"}:(null==t?void 0:t.includes("errorbar-ticks"))&&(l.update[d]={signal:"errorBarTickSize"}))}(v,{boxPlotBarSize:.9,boxPlotTickSize:.4,errorBarTickSize:.4,errorBarMaxTickSize:10}),function e(t){return t.some(t=>{var l;if("rect"===t.type)return!0;let n=t.marks||(null===(l=t.mark)||void 0===l?void 0:l.marks);return!!n&&Array.isArray(n)&&e(n)})}(null!==(s=null==(c=v)?void 0:c.marks)&&void 0!==s?s:[])&&function(e){var t;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;for(let n of null!==(t=null==e?void 0:e.axes)&&void 0!==t?t:[])n.zindex=l}(v);let b=u.oaiSpec;return!function(e,t){var l,n,o;let{lineHeight:i,labelCharLimit:r,titleCharLimit:a}=t;if(!e)return;let c=null!==(n=null===(l=e.scales)||void 0===l?void 0:l.filter(e=>"band"===e.type))&&void 0!==n?n:[];(null!==(o=e.axes)&&void 0!==o?o:[]).forEach(e=>{var t,l,n,o,s,d,u,h,f,p,g;null!==(o=e.encode)&&void 0!==o||(e.encode={}),null!==(s=(l=e.encode).labels)&&void 0!==s||(l.labels={}),null!==(d=(n=e.encode.labels).update)&&void 0!==d||(n.update={});let v=e.encode.labels.update.text,y=K(v&&"object"==typeof v&&"signal"in v?v.signal:"datum.value",r);if(e.encode.labels.update.text={signal:y},e.title){let t=e.title.replace(/'/g,"\\'"),l=K("'".concat(t,"'"),a);null!==(f=(u=e.encode).title)&&void 0!==f||(u.title={}),null!==(p=(h=e.encode.title).update)&&void 0!==p||(h.update={}),e.encode.title.update.text={signal:l}}if(!e.scale||!c.some(t=>t.name===e.scale)||!e.orient)return;let m="number"==typeof e.labelAngle?e.labelAngle:null!==(g=null===(t=e.encode.labels.update.angle)||void 0===t?void 0:t.value)&&void 0!==g?g:0,k="left"===e.orient||"right"===e.orient;if(0===m){k&&(e.encode.labels.update.dy={signal:"-(length(".concat(y,") - 1) * (").concat(i," / 2)")});return}let x="(length(".concat(y,") - 1) * (").concat(i,")"),b="(".concat(m,") * PI / 180"),w="cos(".concat(b,")"),S="sin(".concat(b,")"),j=k?"min(0, ".concat(x," * ").concat(S,")"):"".concat(x," / 2 * ").concat(S),W=k?"-".concat(x," / 2 * ").concat(w):"-min(0, ".concat(x," * ").concat(w,")"),L="(".concat(j,") * ").concat(w," + (").concat(W,") * ").concat(S),C="(".concat(W,") * ").concat(w," - (").concat(j,") * ").concat(S);e.encode.labels.update.dy={signal:C},e.encode.labels.update.dx={signal:L}})}(v,{lineHeight:14.399999999999999,labelCharLimit:null!==(r=null==b?void 0:b.labelCharLimit)&&void 0!==r?r:25,titleCharLimit:null!==(a=null==b?void 0:b.titleCharLimit)&&void 0!==a?a:40}),{vegaSpec:v,styleTokens:y,theme:p}})({chartId:t,data:l}),[t,l]),y=(0,r.useMemo)(()=>i()(()=>{o(es),d(!1)},100),[]),b=(0,r.useCallback)((e,t,l,n)=>{n?o({x:t.clientX,y:t.clientY,value:n}):y()},[y]),w=(0,r.useRef)(null),j=(0,r.useCallback)(e=>{w.current=e;let t=e.container();if(!t)return;let l=e=>{e.preventDefault();let{clientX:l,clientY:n}=e.changedTouches[0],o=new MouseEvent("pointermove",{clientX:l,clientY:n,bubbles:!0,cancelable:!0}),i=document.elementFromPoint(l,n);i?i.dispatchEvent(o):t.dispatchEvent(o)};return t.addEventListener("touchend",l),()=>{t.removeEventListener("touchend",l)}},[]),W=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=W.current;if(!e)return;let t=function(e){for(;e;){let t=window.getComputedStyle(e).overflowY;if(("auto"===t||"scroll"===t)&&e.scrollHeight>e.clientHeight)return e;e=e.parentElement}return null}(e);return t&&G.addListener(t,y),G.addListener(window,y),()=>{t&&G.removeListener(t,y),G.removeListener(window,y)}},[y]);let L=(null==u?void 0:u.aspectRatio)||(null==u?void 0:u.fitWidth)?"calc(100% - 1px)":void 0,z={minWidth:null==u?void 0:u.minWidth,minHeight:null==u?void 0:u.minHeight,aspectRatio:null==u?void 0:u.aspectRatio,width:L};(0,c.yU)({ref:W,onResize:()=>{window.dispatchEvent(new Event("resize"))}});let O="chart-wrapper-".concat(t),P="object"==typeof(null==u?void 0:u.theme)?u.theme:null;return h&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{id:O,className:"flex w-full overflow-x-auto overflow-y-clip",onScroll:y,ref:W,onTouchStart:()=>d(!0),children:[P&&(0,p.jsx)($,{customTheme:P,wrapperId:O}),(0,p.jsx)(V,{styleTokens:f,theme:v,chartId:t}),(0,p.jsxs)("div",{className:"group relative mx-auto",style:z,children:[(0,p.jsx)(a.Z,{spec:h,renderer:"svg",actions:!1,className:"h-full w-full",tooltip:b,onNewView:j}),(null==u?void 0:u.showLogo)&&(0,p.jsx)(ec,{show:!s}),(0,p.jsx)(g,{show:s,showLogo:null==u?void 0:u.showLogo,viewRef:w})]})]}),n.value&&(0,p.jsx)(Y.Z,{state:n})]})};var eu=e=>{let{id:t,data:l}=e,o=(0,r.useRef)(null),{0:i,1:a}=(0,r.useState)(!1);return((0,r.useEffect)(()=>{let e=o.current;if(!e)return;let t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&a(!0)})},{rootMargin:"1000px"});return t.observe(e),()=>{t.disconnect()}},[]),null==l?void 0:l.vegaSpec)?(0,p.jsx)("div",{ref:o,className:(0,n.Z)({"h-[400px]":!i,contents:i}),children:i&&(0,p.jsx)(ed,{id:t,data:l})}):null}},43740:function(e,t,l){var n=l(20487),o=l(2265),i=l(54887),r=l(60521),a=l(57437);t.Z=e=>{let{state:t}=e,l=(0,o.useRef)(null),{0:c,1:s}=(0,o.useState)({left:t.x,top:t.y});if((0,o.useLayoutEffect)(()=>{if(l.current){let{offsetWidth:e,offsetHeight:n}=l.current,o={left:0,top:0,right:document.documentElement.clientWidth,bottom:document.documentElement.clientHeight};s({left:Math.min(o.right-e,Math.max(o.left,t.x)),top:Math.min(o.bottom-n,Math.max(o.top,t.y))})}},[t.x,t.y,l]),!t.value)return null;let d=["undefined","",null,void 0],u="object"==typeof t.value?Object.entries(t.value).map(e=>{let[t,l]=e;return d.includes(l)?null:(0,a.jsx)("p",{children:"".concat(t,": ").concat(l)},t)}).filter(Boolean):d.includes(t.value)?[]:[(0,a.jsx)("p",{children:t.value},t.value)],h=u.length>0&&(0,a.jsx)("div",{className:(0,n.Z)("pointer-events-none fixed box-border p-2",r.Oy),ref:l,style:{left:c.left,top:c.top},children:(0,a.jsx)("div",{className:"bg-primary-100 text-secondary-100 w-max max-w-[300px] rounded-2xl px-3 py-2 text-sm",children:u})});return h&&i.createPortal(h,document.body)}}}]);